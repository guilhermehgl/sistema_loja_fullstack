<h3>Produtos Cadastrados</h3>

<!-- CONTROLES -->
<div style="margin-bottom: 16px; display: flex; gap: 12px; flex-wrap: wrap; align-items: center;">
  <input type="text" placeholder="Pesquisar produto..." [(ngModel)]="searchTerm" (ngModelChange)="currentPage = 1; applyFilters()" />
  <select [ngModel]="pageSize" (ngModelChange)="pageSize = +$event; currentPage = 1; applyFilters()">
    <option value="20">20</option>
    <option value="50">50</option>
    <option value="100">100</option>
  </select>
  <select [(ngModel)]="sortBy" (change)="currentPage = 1; applyFilters()">
    <option value="barcode">CÃ³digo de barras</option>
    <option value="name">Nome do produto</option>
  </select>
</div>

<hr />

<!-- LISTA -->
<div class="container-card">
  <div class="card-item" *ngFor="let product of filteredProducts">
  <strong>{{ product.name }}</strong><br />
  CÃ³digo: {{ product.barcode }}<br />
  Quantidade: {{ product.quantity }}<br />
  PreÃ§o: R$ {{ product.price | number:'1.2-2' }} <br />

  <button (click)="openConfirmModal(product, 'edit')">âœï¸ Editar</button>
  <button (click)="openConfirmModal(product, 'delete')">ğŸ—‘ï¸ Deletar</button>

  <hr />
</div>
</div>

<!-- MODAIS -->
<app-confirm-modal
  *ngIf="showConfirmModal"
  title="ConfirmaÃ§Ã£o de administrador"
  message="Digite a senha do administrador"
  inputType="password"
  (confirm)="confirmActionPassword($event)"
  (cancel)="showConfirmModal = false">
</app-confirm-modal>

<app-edit-product-modal
  *ngIf="showEditModal && productTarget"
  [product]="productTarget"
  [existingBarcodes]="allBarcodes"  (save)="updateProduct($event)"
  (cancel)="showEditModal = false">
</app-edit-product-modal>

<app-alert-modal
  *ngIf="showAlertModal"
  title="Aviso"
  [message]="alertMessage"
  (close)="showAlertModal = false">
</app-alert-modal>

<!-- PAGINAÃ‡ÃƒO -->
<div style="display: flex; gap: 12px; align-items: center; margin-top: 12px;">
  <button (click)="previousPage()" [disabled]="currentPage === 1">â¬… PÃ¡gina anterior</button>
  <span>PÃ¡gina {{ currentPage }} de {{ totalPages }}</span>
  <button (click)="nextPage()" [disabled]="currentPage === totalPages">PrÃ³xima pÃ¡gina â¡</button>
</div>
